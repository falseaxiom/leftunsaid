
<!DOCTYPE html>
<html>
    <head>
        <title>left unsaid</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <link rel="icon" type="image/x-icon" href="favicon.ico"/>
        <link rel="preconnect" href="https://fonts.googleapis.com"> 
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="./css/room.css">
        <style>
            :root {
                --a: #001613;
                --b: #005b49;
                --c: #01e19d;
                --d: #94ffd2;
                --e: #ccffe6;
                --f: #ccffe655;
            }
        </style>
        <script>
            /*** SETUP p0 (so suzy goes missing right away) ***/
             // if on suzy's route and first time, LOSE HER!!!
            if (localStorage.getItem("branch1") == "suzy" && localStorage.getItem("suzy") == 0) {
                console.log("omg u lost suzy :(");
                localStorage.setItem("suzy", 1);
            }
        </script>
    </head>
    <body>
        <div class="box">
            <!-- background -->
            <img class="big" id="bg" src="./imgs/5 bathroom/bg.png">
            <!-- <img class="big" src="./imgs/5 bathroom/ref.png" style="opacity: 30%;"> -->
            
            <!-- interactive items -->
            <img class="i small" id="can2" style="top: 650px; left: 651px;" src="./imgs/5 bathroom/interactive/whitetalon.png">
            <img class="i small" id="candle" style="top: 268px; left: 860px;" src="./imgs/5 bathroom/interactive/candle.png">
            <img class="i small" id="towel" style="top: 240px; left: 1114px;" src="./imgs/5 bathroom/interactive/towel.png">
            <img class="i small" id="toiletpaper" style="top: 463px; left: 1122px;" src="./imgs/5 bathroom/interactive/toiletpaper.png">
            <img class="i small" id="cup6" style="top: 572px; left: 1275px;" src="./imgs/5 bathroom/interactive/cup.png">
            <img class="i small" id="can3" style="top: 341px; left: 1289px;" src="./imgs/5 bathroom/interactive/beercan.png">
            <img class="i small" id="mirror" style="top: 70px; left: 1293px;" src="./imgs/5 bathroom/interactive/mirror.png">

            <!-- characters -->
            <img class="c small hidden" id="suzy" style="top: 436px; left: 752px;" src="./imgs/5 bathroom/characters/suzy.png">
            <img class="c small hidden" id="mystery" style="top: 334px; left: 861px;" src="./imgs/5 bathroom/characters/mystery.png">

            <!-- ui -->
            <img class="u small" id="umap" style="top: 787px; left: 30px;" src="./imgs/5 bathroom/ui/0 map.png">
            <img class="u small" id="uphone" style="top: 832px; left: 391px;" src="./imgs/5 bathroom/ui/1 phone.png">
            <img class="u small hidden" id="uyearbook" style="top: 830px; left: 571px;" src="./imgs/5 bathroom/ui/2 yearbook.png">
            <img class="u small hidden" id="ubracelet" style="top: 820px; left: 844px;" src="./imgs/5 bathroom/ui/3 bracelet.png">
            <img class="u small hidden" id="uscrunchie" style="top: 834px; left: 1061px;" src="./imgs/5 bathroom/ui/4 scrunchie.png">
            <img class="u small hidden" id="ulighter" style="top: 824px; left: 1297px;" src="./imgs/5 bathroom/ui/5 lighter.png">
            <img class="u small hidden" id="utrash" style="top: 814px; left: 1439px;" src="./imgs/5 bathroom/ui/6 trash.png">
            <img class="u small" id="usuzy" style="top: 766px; left: 1678px; padding-bottom: 0;" src="./imgs/5 bathroom/ui/7 suzy.png">
            <img class="u small hidden" id="unosuzy" style="top: 766px; left: 1678px; padding-bottom: 0;" src="./imgs/5 bathroom/ui/8 nosuzy.png"> 

            <!-- dialog stuff -->
            <img class="d big hidden" id="dark" src="./imgs/5 bathroom/dialog/dark.png" style="opacity: 50%">
            <img class="d big hidden" id="dmap" src="./imgs/5 bathroom/dialog/dmap.png">
            <img class="d big hidden" id="dsuzy" src="./imgs/5 bathroom/dialog/suzy.png">
            <img class="d big hidden" id="danvi" src="./imgs/5 bathroom/dialog/anvi.png">
            <img class="d big hidden" id="dryan" src="./imgs/5 bathroom/dialog/ryan.png">
            <img class="d big hidden" id="dlisa" src="./imgs/5 bathroom/dialog/lisa.png">
            <img class="d big hidden" id="dmirror" src="./imgs/5 bathroom/dialog/mirror.png">
            <img class="d big hidden" id="textbox" src="./imgs/5 bathroom/dialog/textbox.png">
            <div class="d hidden" id="text">
                <b class="d" id="charname" style="color: var(--c)">name: </b>
                <span class="d" id="dialog">placeholder text</span>
            </div>

            <!-- map -->
            <div class="d big hidden" id="rooms">
                <div class="area" title="livingroom" style="width: 295px; height: 370px; top: 65px; left: 575px;" onclick="location.href = './livingroom.html'"></div>
                <div class="area" title="diningroom" style="width: 275px; height: 370px; top: 65px; left: 875px;" onclick="location.href = './diningroom.html'"></div>
                <div class="area" title="kitchen" style="width: 198px; height: 300px; top: 165px; left: 1155px;" onclick="location.href = './kitchen.html'"></div>
                <div class="area" title="backyard" style="width: 198px; height: 95px; top: 65px; left: 1155px;" onclick="location.href = './backyard.html'"></div>
                <div class="area" title="recroom" style="width: 315px; height: 285px; top: 445px; left: 570px;" onclick="location.href = './recroom.html'"></div>
                <div class="area" title="office" style="width: 185px; height: 155px; top: 475px; left: 1170px;" onclick="location.href = './office.html'"></div>
                <!-- <div class="area" title="bathroom" style="width: 100px; height: 155px; top: 475px; left: 1065px;" onclick="location.href = './bathroom.html'"></div> -->
            </div>

            <!-- choices -->
            <img class="d big hidden" id="dark2" src="./imgs/5 bathroom/dialog/dark.png" style="opacity: 50%">
            <div class="d choicebox hidden" id="choicebox">
                <em class="d choicehelper hidden" id="choicehelper">(click one of the dialog options to continue.)</em>
                <button class="choice hidden" id="choice0">choice0</button>
                <button class="choice hidden" id="choice1">choice1</button>
                <button class="choice hidden" id="choice2">choice2</button>
            </div>

            <!-- yearbook -->
            <img class="d big hidden" id="dark3" src="./imgs/5 bathroom/dialog/dark.png" style="opacity: 50%">
            <img class="y big hidden" id="page" src="./imgs/5 bathroom/yearbook/page.png">
            <img class="y big hidden" id="yellie" src="./imgs/5 bathroom/yearbook/ellie.png">
            <img class="y big hidden" id="yangela" src="./imgs/5 bathroom/yearbook/angela.png">
            <img class="y big hidden" id="ybrad" src="./imgs/5 bathroom/yearbook/brad.png">
            <img class="y big hidden" id="yjake" src="./imgs/5 bathroom/yearbook/jake.png">
            <img class="y big hidden" id="ylaurenp" src="./imgs/5 bathroom/yearbook/laurenp.png">
            <img class="y big hidden" id="yanvi" src="./imgs/5 bathroom/yearbook/anvi.png">
            <img class="y big hidden" id="yemily" src="./imgs/5 bathroom/yearbook/emily.png">
            <img class="y big hidden" id="yryan" src="./imgs/5 bathroom/yearbook/ryan.png">
            <img class="y big hidden" id="ylisa" src="./imgs/5 bathroom/yearbook/lisa.png">
            <img class="y big hidden" id="ynick" src="./imgs/5 bathroom/yearbook/nick.png">
            <img class="y big hidden" id="ycorey" src="./imgs/5 bathroom/yearbook/corey.png">
            <img class="y big hidden" id="yrohan" src="./imgs/5 bathroom/yearbook/rohan.png">
            <img class="y big hidden" id="yyasmeen" src="./imgs/5 bathroom/yearbook/yasmeen.png">
            <img class="y big hidden" id="ylaurenf" src="./imgs/5 bathroom/yearbook/laurenf.png">
            <img class="y big hidden" id="ykatrina" src="./imgs/5 bathroom/yearbook/katrina.png">

            <!-- navbar -->
            <div class="nav">
                <a onclick="home()">main menu</a>
                <a onclick="reset()">reset game</a>
            </div>
        </div>
    </body>
    <script
        src="https://code.jquery.com/jquery-3.3.1.js"
        integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
        crossorigin="anonymous">
    </script>
    <script src="./dialog/bathroom.js"></script>
    <script src="./dialog/ui.js"></script>
    <script src="./default.js"></script>
    <script>
        /*** VARIABLES ***/
        // (see default.js for others)
        // dialog character sprites
        let dmap = document.getElementById("dmap");
        let rooms = document.getElementById("rooms");
        let dsuzy = document.getElementById("dsuzy");
        let danvi = document.getElementById("danvi");
        let dryan = document.getElementById("dryan");
        let dlisa = document.getElementById("dlisa");
        let dmirror = document.getElementById("dmirror");

        /*** SETUP ***/
        // (see default.js for others)
        // change current room
        localStorage.setItem("curr", "bathroom")
        // if we know suzy's missing, appearify her & initiate auto dialog
        if (localStorage.getItem("suzy") == 3) {
            console.log("found suzy :)")
            unhide(document.getElementById("suzy"));
            if (localStorage.getItem("branch1") != "suzy") unhide(document.getElementById("mystery"));
            foundDialog(0);
        }
        // hide trash already picked up (ROOM SENSITIVE)
        if (localStorage.getItem("trash") != "") {
            let trash = localStorage.getItem("trash").split("_");
            trash.shift();
            for (let i = 0; i < trash.length; i++) {
                let t = document.getElementById(trash[i]);
                if (t) hide(t);
            }
        }
        

        /*** CLICKING ***/
        $(document).click(function(event) {
            let id = $(event.target).attr('id');                 // id of clicked thing
            let cl = $(event.target).attr('class').split(/\s+/); // classlist (array)
            let val = $(event.target).attr('title');             // title/value

            // if currently on a dialog spiel
            if (cl.includes("d")) {
                if (!isHidden(dark2)) return; // if making a choice, must click one to move on
                if (!isHidden(dmap)) {
                    toggleDialog();
                    hide(dmap);
                    hide(rooms);
                    currentDialog = ["", 0];
                    return;
                }
                dialogSwitch();
                return;
            }
            // if currently making a choice
            if (cl.includes("choice")) {
                currentDialog[1] += parseInt(val);
                dialogSwitch();
                return;
            }
            // if a character
            if (cl.includes("c")) {
                switch(id) {
                    default:
                        break;
                }
            }
            // if an interactive item
            if (cl.includes("i")) {
                switch(id) {
                    case("can2"):
                        toggleDialog();
                        can2(0);
                        break;
                    case("candle"):
                        toggleDialog();
                        candle(0);
                        break;
                    case("towel"):
                        toggleDialog();
                        towel(0);
                        break;
                    case("toiletpaper"):
                        toggleDialog();
                        toiletpaper(0);
                        break;
                    case("cup6"):
                        toggleDialog();
                        cup6(0);
                        break;
                    case("can3"):
                        toggleDialog();
                        can3(0);
                        break;
                    case("mirror"):
                        toggleDialog();
                        mirror(0);
                        break;
                    default:
                        break;
                }
            }
            // if a ui item
            if (cl.includes("u")) {
                switch(id) {
                    case("umap"):
                        toggleDialog();
                        localStorage.getItem("suzy") == 1 ? map2(0) : map(0);
                        break;
                    case("uphone"):
                        toggleDialog();
                        phone(0);
                        break;
                    case("uyearbook"):
                        toggleDialog();
                        yearbook(0);
                        break;
                    case("ubracelet"):
                        toggleDialog();
                        bracelet(0);
                        break;
                    case("uscrunchie"):
                        toggleDialog();
                        scrunchie(0);
                        break;
                    case("ulighter"):
                        toggleDialog();
                        lighter(0);
                        break;
                    case("utrash"):
                        toggleDialog();
                        trash(0);
                        break;
                    case("usuzy"):
                        toggleDialog();
                        suzy1(0);
                        break;
                    case("unosuzy"):
                        toggleDialog();
                        localStorage.getItem("suzy") == 1 ? nosuzy1(0) : nosuzy2(0);
                        break;
                    default:
                        break;
                }
            }
            // if yearbook
            if (cl.includes("y")) {
                toggleYearbook();
                currentDialog = ["", 0];
                return;
            }
        });

        /*** GENERAL FUNCTIONS ***/
        // (see default.js for others)
        // dialog switch
        function dialogSwitch() {
            switch (currentDialog[0]) {
                    case ("anvi1"): // automatic
                        anvi1(currentDialog[1]);
                        break;
                    case ("ryan1"):
                        ryan1(currentDialog[1]);
                        break;
                    case ("lisa1"):
                        lisa1(currentDialog[1]);
                        break;
                    case ("suzy2"):
                        suzy2(currentDialog[1]);
                        break;
                    case ("can2"): // interactive
                        can2(currentDialog[1]);
                        break;
                    case ("candle"):
                        candle(currentDialog[1]);
                        break;
                    case ("towel"):
                        towel(currentDialog[1]);
                        break;
                    case ("toiletpaper"):
                        toiletpaper(currentDialog[1]);
                        break;
                    case ("cup6"):
                        cup6(currentDialog[1]);
                        break;
                    case ("can3"):
                        can3(currentDialog[1]);
                        break;
                    case ("mirror"):
                        mirror(currentDialog[1]);
                        break;
                    case ("map"): // ui
                        map(currentDialog[1]);
                        break;
                    case ("map2"): // ui
                        map2(currentDialog[1]);
                        break;
                    case ("phone"):
                        phone(currentDialog[1]);
                        break;
                    case ("yearbook"):
                        yearbook(currentDialog[1]);
                        break;
                    case ("bracelet"):
                        bracelet(currentDialog[1]);
                        break;
                    case ("scrunchie"):
                        scrunchie(currentDialog[1]);
                        break;
                    case ("lighter"):
                        lighter(currentDialog[1]);
                        break;
                    case ("trash"):
                        trash(currentDialog[1]);
                        break;
                    case ("suzy"):
                        suzy1(currentDialog[1]);
                        break;
                    case ("nosuzy1"):
                        nosuzy1(currentDialog[1]);
                        break;
                    case ("nosuzy2"):
                        nosuzy2(currentDialog[1]);
                        break;
                    default:
                        break;
                }
        }
        
        /*** GAMEPLAY FUNCTIONS ***/
        // (see default.js for others)
        // opening sequence
        function foundDialog() {
            console.log("starting scene...");
            toggleDialog();
            switch (localStorage.getItem("branch1")) {
                case "anvi":
                    anvi1(0);
                    break;
                case "ryan":
                    ryan1(0);
                    break;
                case "lisa":
                    lisa1(0);
                    break;
                case "suzy":
                    suzy2(0);
                    break;
                default:
                    suzy2(0);
                    break;
            }
        }
        // automatic dialog
        function anvi1(n) {
            console.log("anvi auto dialog:", n);
            if (n == 0) currentDialog[0] = "anvi1"; // dialog start
            if (n == anvi1a.length) { // dialog finish
                if (!isHidden(dark2)) toggleChoices();
                hide(danvi);
                toggleDialog();
                currentDialog = ["", 0];
                location.href = "./goinghome.html";
            }
            anvi1a[n] == "ANVI:" ? unhide(danvi) : hide(danvi); // show anvi's sprite when she's talking
            if (anvi1b[n].substring(0,6) == "CHOICE") { // choice
                charname.innerHTML = "";
                dialog.innerHTML = "";
                getChoices(anvi1b[n]);
                currentDialog[1]++;
            }
            else { // mid-dialog
                if (!isHidden(dark2)) toggleChoices();
                if (anvi1b[n].includes("^")) {
                    let dgs = anvi1b[n].split("^");
                    charname.innerHTML = anvi1a[n];
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    charname.innerHTML = anvi1a[n];
                    dialog.innerHTML = anvi1b[n];
                    currentDialog[1]++;
                }
            }
        }
        function ryan1(n) {
            console.log("ryan auto dialog:", n);
            if (n == 0) currentDialog[0] = "ryan1"; // dialog start
            if (n == ryan1a.length) { // dialog finish
                if (!isHidden(dark2)) toggleChoices();
                hide(dryan);
                toggleDialog();
                currentDialog = ["", 0];
                location.href = "./goinghome.html";
            }
            ryan1a[n] == "RYAN:" ? unhide(dryan) : hide(dryan); // show ryan's sprite when he's talking
            if (ryan1b[n].substring(0,6) == "CHOICE") { // choice
                charname.innerHTML = "";
                dialog.innerHTML = "";
                getChoices(ryan1b[n]);
                currentDialog[1]++;
            }
            else { // mid-dialog
                if (!isHidden(dark2)) toggleChoices();
                if (ryan1b[n].includes("^")) {
                    let dgs = ryan1b[n].split("^");
                    charname.innerHTML = ryan1a[n];
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    charname.innerHTML = ryan1a[n];
                    dialog.innerHTML = ryan1b[n];
                    currentDialog[1]++;
                }
            }
        }
        function lisa1(n) {
            console.log("lisa auto dialog:", n);
            if (n == 0) currentDialog[0] = "lisa1"; // dialog start
            if (n == lisa1a.length) { // dialog finish
                if (!isHidden(dark2)) toggleChoices();
                hide(dlisa);
                toggleDialog();
                currentDialog = ["", 0];
                location.href = "./goinghome.html";
            }
            lisa1a[n] == "LISA:" ? unhide(dlisa) : hide(dlisa); // show lisa's sprite when he's talking
            if (lisa1b[n].substring(0,6) == "CHOICE") { // choice
                charname.innerHTML = "";
                dialog.innerHTML = "";
                getChoices(lisa1b[n]);
                currentDialog[1]++;
            }
            else { // mid-dialog
                if (!isHidden(dark2)) toggleChoices();
                if (lisa1b[n].includes("^")) {
                    let dgs = lisa1b[n].split("^");
                    charname.innerHTML = lisa1a[n];
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    charname.innerHTML = lisa1a[n];
                    dialog.innerHTML = lisa1b[n];
                    currentDialog[1]++;
                }
            }
        }
        function suzy2(n) {
            console.log("suzy auto dialog:", n);
            if (n == 0) currentDialog[0] = "suzy2"; // dialog start
            if (n == suzy2a.length) { // dialog finish
                if (!isHidden(dark2)) toggleChoices();
                hide(dsuzy);
                toggleDialog();
                currentDialog = ["", 0];
                location.href = "./goinghome.html";
            }
            if (suzy2b[n].substring(0,6) == "CHOICE") { // choice
                charname.innerHTML = "";
                dialog.innerHTML = "";
                getChoices(suzy2b[n]);
                currentDialog[1]++;
            }
            else { // mid-dialog
                if (!isHidden(dark2)) toggleChoices();
                if (suzy2b[n].includes("^")) {
                    let dgs = suzy2b[n].split("^");
                    charname.innerHTML = suzy2a[n];
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    charname.innerHTML = suzy2a[n];
                    dialog.innerHTML = suzy2b[n];
                    currentDialog[1]++;
                }
            }
        }
        // interactive item dialog
        function can2(n) {
            console.log("can2 dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "can2";
            if (n == can2a.length) {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else if (can2a[n].substring(0,6) == "CHOICE") {
                dialog.innerHTML = "";
                getChoices(can2a[n]);
                currentDialog[1]++;
            }
            else if (can2a[n].substring(0,6) == "PICKUP") {
                hide(document.getElementById("can2"));
                localStorage.setItem("trash", localStorage.getItem("trash") + "_can2");
                if (isHidden(document.getElementById("utrash"))) unhide(document.getElementById("utrash"));

                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (can2a[n].includes("^")) {
                    let dgs = can2a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = can2a[n];
                    currentDialog[1]++;
                }
            }
        }
        function candle(n) {
            console.log("candle dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "candle";
            if (n == candle1a.length) {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            if (candle1a[n].substring(0,6) == "CHOICE") {
                dialog.innerHTML = "";
                getChoices(candle1a[n]);
                currentDialog[1]++;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (candle1a[n].includes("^")) {
                    let dgs = candle1a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = candle1a[n];
                    currentDialog[1]++;
                }
            }
        }
        function towel(n) {
            console.log("towel dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "towel";
            if (n == towel1a.length) {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            if (towel1a[n].substring(0,6) == "CHOICE") {
                dialog.innerHTML = "";
                getChoices(towel1a[n]);
                currentDialog[1]++;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (towel1a[n].includes("^")) {
                    let dgs = towel1a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = towel1a[n];
                    currentDialog[1]++;
                }
            }
        }
        function toiletpaper(n) {
            console.log("toiletpaper dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "toiletpaper";
            if (n == toiletpaper1a.length) {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            if (toiletpaper1a[n].substring(0,6) == "CHOICE") {
                dialog.innerHTML = "";
                getChoices(toiletpaper1a[n]);
                currentDialog[1]++;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (toiletpaper1a[n].includes("^")) {
                    let dgs = toiletpaper1a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = toiletpaper1a[n];
                    currentDialog[1]++;
                }
            }
        }
        function cup6(n) {
            console.log("cup6 dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "cup6";
            if (n == cup6a.length) {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else if (cup6a[n].substring(0,6) == "CHOICE") {
                dialog.innerHTML = "";
                getChoices(cup6a[n]);
                currentDialog[1]++;
            }
            else if (cup6a[n].substring(0,6) == "PICKUP") {
                hide(document.getElementById("cup6"));
                localStorage.setItem("trash", localStorage.getItem("trash") + "_cup6");
                if (isHidden(document.getElementById("utrash"))) unhide(document.getElementById("utrash"));

                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (cup6a[n].includes("^")) {
                    let dgs = cup6a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = cup6a[n];
                    currentDialog[1]++;
                }
            }
        }
        function can3(n) {
            console.log("can3 dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "can3";
            if (n == can3a.length) {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else if (can3a[n].substring(0,6) == "CHOICE") {
                dialog.innerHTML = "";
                getChoices(can3a[n]);
                currentDialog[1]++;
            }
            else if (can3a[n].substring(0,6) == "PICKUP") {
                hide(document.getElementById("can3"));
                localStorage.setItem("trash", localStorage.getItem("trash") + "_can3");
                if (isHidden(document.getElementById("utrash"))) unhide(document.getElementById("utrash"));

                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (can3a[n].includes("^")) {
                    let dgs = can3a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = can3a[n];
                    currentDialog[1]++;
                }
            }
        }
        function mirror(n) {
            console.log("mirror dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "mirror";
            if (n == mirror1a.length) {
                hide(dmirror);
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else if (mirror1a[n].substring(0,6) == "CHOICE") {
                dialog.innerHTML = "";
                getChoices(mirror1a[n]);
                currentDialog[1]++;
            }
            else if (mirror1a[n].substring(0,4) == "LOOK") {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();

                unhide(dmirror); // look at urself
                unhide(dark);
                currentDialog[1]++;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (mirror1a[n].includes("^")) {
                    let dgs = mirror1a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = mirror1a[n];
                    currentDialog[1]++;
                }
            }
        }
        // ui dialog
        </script>
</html>