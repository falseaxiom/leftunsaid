
<!DOCTYPE html>
<html>
    <head>
        <title>left unsaid - demo</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <link rel="icon" type="image/x-icon" href="favicon.ico"/>
        <link rel="preconnect" href="https://fonts.googleapis.com"> 
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="./css/room.css">
        <style>
            :root {
                --a: #021311;
                --b: #0a3a2e;
                --c: #155c38;
                --d: #82c40d;
                --e: #e7ff7b;
            }
        </style>
    </head>
    <body>
        <div class="box">
            <!-- background -->
            <img class="big" id="bg" src="./imgs/dining room/bg.png">
            <!-- <img class="big" src="./imgs/living room/ref.png" style="opacity: 30%;"> -->

            <!-- hitboxes -->
            <!-- <div class="hit" id="ncouch" style="width: 832px; height: 452px; top: 262px; left: 909px; border-radius: 100px;" title="couch"></div>
            <div class="hit" id="njoint" style="width: 88px; height: 29px; top: 703px; left: 1487px; border-radius: 20px; transform: rotate(-23deg);" title="joint"></div>
            <div class="hit" id="nlamp" style="width: 159px; height: 598px; top: 122px; left: 1711px; border-radius: 50px;" title="lamp"></div>
            <div class="hit" id="nps5" style="width: 95px; height: 169px; top: 305px; left: 175px;" title="ps5"></div>
            <div class="hit" id="nrbox" style="width: 146px; height: 167px; top: 552px; left: 486px;" title="record box"></div>
            <div class="hit" id="nrplay" style="width: 153px; height: 124px; top: 268px; left: 316px;" title="record player"></div>
            <div class="hit" id="ntv" style="width: 123px; height: 392px; top: 83px; left: 39px;" title="tv"></div>
            <div class="hit" id="cjake" style="width: 250px; height: 350px; top: 30px; left: 1300px; border-radius: 100px;" title="jake"></div>
            <div class="hit" id="cangela" style="width: 319px; height: 592px; top: 175px; left: 945px; border-radius: 120px;" title="angela"></div>
            <div class="hit" id="cellie" style="width: 239px; height: 654px; top: 99px; left: 678px; border-radius: 20px;" title="ellie"></div>
            <div class="hit" id="cbrad" style="width: 250px; height: 640px; top: 145px; left: 1385px; transform: rotate(30deg); border-radius: 100px;" title="brad"></div> -->

            <!-- inventory -->
            <!-- <div class="inventory" id="inv">
                <img class="item" id="iphone" src="./imgs/living room/inventory/phone.png" title="phone">
                <img class="item" id="icup" src="./imgs/living room/inventory/cup.png" title="cup">
                <img class="item" id="ibook" src="./imgs/living room/inventory/yearbook.png" title="yearbook">
                <img class="item hidden" id="ijoint" src="./imgs/living room/inventory/joint.png" title="joint">
            </div> -->

            <!-- other ui -->
            <div class="hit" id="umap" style="width: 286px; height: 247px; top: 798px; left: 125px;" title="map"></div>

            <!-- dialog stuff -->
            <img class="dg big hidden" id="dark" src="./imgs/living room/dialog/dark.png" style="opacity: 50%">
            <img class="dg big hidden" id="ddrew" src="./imgs/living room/dialog/drew.png">
            <img class="dg big hidden" id="textbox" src="./imgs/living room/dialog/textbox.png">
            <div class="dg hidden" id="text">
                <b class="dg" id="charname" style="color: var(--c)">name: </b>
                <span class="dg" id="dialog">weewoo</span>
            </div>

            <!-- choices -->
            <img class="dg big hidden" id="dark2" src="./imgs/living room/dialog/dark.png" style="opacity: 50%">
            <div class="choicebox hidden" id="choicebox">
                <button class="choice hidden" id="choice1">choice1</button>
                <button class="choice hidden" id="choice2">choice2</button>
                <button class="choice hidden" id="choice3">choice3</button>
            </div>
        </div>
    </body>
    <script
        src="https://code.jquery.com/jquery-3.3.1.js"
        integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
        crossorigin="anonymous">
    </script>
    <!-- <script>
        let dark = document.getElementById('dark');
        let textbox = document.getElementById('textbox');
        let text = document.getElementById('text');
        let charname = document.getElementById('charname');
        let dialog = document.getElementById('dialog');
        let sprite;

        let dark2 = document.getElementById('dark2');
        let choicebox = document.getElementById("choicebox");
        let choice1 = document.getElementById("choice1");
        let choice2 = document.getElementById("choice2");
        let choice3 = document.getElementById("choice3");

        let i = 0;
        let a, b;
        let type, thing;

        $(document).click(function(event) {
            let id = $(event.target).attr('id');
            let cl = $(event.target).attr('class').split(/\s+/);
            let val = $(event.target).attr('title');

            if (id == 'bg' || id == 'inv' || cl.includes('small') || cl.includes('bar') || cl.includes('barlabel')) return;
            if (!choicebox.classList.contains('hidden')) {
                if (!cl.includes('choice')) return;
                console.log("choice made")

                // hide everything again
                dark2.classList.add('hidden');
                choicebox.classList.add('hidden');
                choice1.classList.add('hidden');
                choice1.innerHTML = '';
                choice1.title = '';
                if (!choice2.classList.contains('hidden')) {
                    choice2.classList.add('hidden');
                    choice2.innerHTML = '';
                    choice2.title = '';
                }
                if (!choice3.classList.contains('hidden')) {
                    choice3.classList.add('hidden');
                    choice3.innerHTML = '';
                    choice3.title = '';
                }

                vals = val.split('-');
                i += parseInt(vals[0]);
                charname.innerHTML = a[i] + ':';
                dialog.innerHTML = b[i];

                i += 1 + parseInt(vals[1]) - parseInt(vals[0]);
            }
            else if (i == 0) { // begin dialog
                var title = $(event.target).attr('title');

                type = id.charAt(0);
                thing = id.substring(1);
                console.log('begin dialog:', thing);

                dark.classList.remove('hidden');
                textbox.classList.remove('hidden');
                text.classList.remove('hidden');

                if (type == 'c') {
                    if (thing == 'jake') {a = jake1a; b = jake1b};
                    if (thing == 'angela') {a = angela1a; b = angela1b};
                    if (thing == 'ellie') {a = ellie1a; b = ellie1b};
                    if (thing == 'brad') {a = brad1a; b = brad1b};
                    if (thing == 'suzy') {a = suzy1a; b = suzy1b};

                    charname.innerHTML = a[i] + ':';
                    dialog.innerHTML = b[i];
                }
                else if (type == 'n') {
                    if (thing == 'couch') {b = couch};
                    if (thing == 'lamp') {b = lamp};
                    if (thing == 'joint') {b = joint};
                    if (thing == 'rplay') {b = rplay};
                    if (thing == 'rbox') {b = rbox};
                    if (thing == 'ps5') {b = ps5};
                    if (thing == 'tv') {b = tv};
                    charname.innerHTML = '';
                    dialog.innerHTML = '[ '+b[i]+' ]';
                }
                else if (type == 'i') {
                    if (thing == 'phone') {b = iphone};
                    if (thing == 'cup') {b = icup};
                    if (thing == 'book') {b = ibook};
                    if (thing == 'joint') {b = ijoint};
                    charname.innerHTML = '';
                    dialog.innerHTML = '[ '+b[i]+' ]';
                }
                else {
                    b = [null];
                    charname.innerHTML = '';
                    dialog.innerHTML = '[ this is a navigation item. don\'t worry about it for now. ]';
                }

                i++;
            }
            else if (i >= b.length) { // end dialog
                console.log('end dialog');
                dark.classList.add('hidden');
                textbox.classList.add('hidden');
                text.classList.add('hidden');
                // ddrew.classList.add('hidden');

                let anx = document.getElementById('anxiety');
                if (type == 'c' && anx.offsetWidth < 480) anx.style.width = anx.offsetWidth + 120 + "px";

                i = 0;
            }
            else if (b[i] == '***') { // pick up object & end dialog
                console.log('pick up object & end dialog');
                // hide object in scene
                let nitem = document.getElementById(thing);
                let nhit = document.getElementById('n' + thing);
                nitem.classList.add('hidden');
                nhit.classList.add('hidden');


                // show object in inventory
                let iitem = document.getElementById('i' + thing);
                iitem.classList.remove('hidden');

                dark.classList.add('hidden');
                textbox.classList.add('hidden');
                text.classList.add('hidden');
                // ddrew.classList.add('hidden');
                i = 0;
            }
            else if (b[i].substring(0,3) == "$$$") { // activate choice
                console.log('activate choice');
                charname.innerHTML = '';
                dialog.innerHTML = '';

                // unhide dark bg, choice container
                dark2.classList.remove('hidden');
                choicebox.classList.remove('hidden');

                // unhide as many choices as needed
                let choices = b[i].split('_');
                choices.shift();
                let ch1 = choices[0].split('^');
                choice1.classList.remove('hidden');
                choice1.innerHTML = ch1[0];
                choice1.title = ch1[1];
                if (choices.length >= 2) {
                    let ch2 = choices[1].split('^');
                    choice2.classList.remove('hidden');
                    choice2.innerHTML = ch2[0];
                    choice2.title = ch2[1];
                }
                if (choices.length == 3) {
                    let ch3 = choices[2].split('^');
                    choice3.classList.remove('hidden');
                    choice3.innerHTML = ch3[0];
                    choice3.title = ch3[1];
                }
                i++
            }
            else { // continue dialog
                console.log('continue dialog');
                if (type == 'c') { charname.innerHTML = a[i] + ':'; dialog.innerHTML = b[i]; }
                else             dialog.innerHTML = '[ '+b[i]+' ]';
                i++;
            }
        });
    </script> -->
</html>