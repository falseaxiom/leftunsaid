
<!DOCTYPE html>
<html>
    <head>
        <title>left unsaid</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <link rel="icon" type="image/x-icon" href="favicon.ico"/>
        <link rel="preconnect" href="https://fonts.googleapis.com"> 
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="./css/room.css">
        <style>
            :root {
                --a: #021311;
                --b: #0a3a2e;
                --c: #155c38;
                --d: #82c40d;
                --e: #e7ff7b;
                --f: #e7ff7b55;
            }
        </style>
        <script>
            /*** SETUP (up here so suzy is not missing lol) ***/
            // if first time opening this page, put vars in localStorage
            if (!localStorage.getItem("livopening")) {
                localStorage.setItem("livopening", 0) // gone thru living room opening?
                localStorage.setItem("branch1", ""); // first branch - which old friend do u approach?
                localStorage.setItem("sigs", ""); // signatures in yearbook
                localStorage.setItem("suzy", 0); // lost suzy?
                localStorage.setItem("talk1", 0); // talked to anvi
                localStorage.setItem("trash", ""); // count trash
                localStorage.setItem("kat", ""); // what order did you see kat?
            }
        </script>
    </head>
    <body>
        <div class="box">
            <!-- background -->
            <img class="big" id="bg" src="./imgs/1 living room/bg.png">
            <!-- <img class="big" src="./imgs/1 living room/ref.png" style="opacity: 30%;"> -->

            <!-- interactive items -->
            <img class="i small" id="tv" style="top: 73px; left: 29px;" src="./imgs/1 living room/interactive/tv.png">
            <img class="i small" id="ps5" style="top: 295px; left: 165px;" src="./imgs/1 living room/interactive/ps5.png">
            <img class="i small" id="recordplayer" style="top: 258px; left: 306px;" src="./imgs/1 living room/interactive/recordplayer.png">
            <img class="i small" id="recordbox" style="top: 542px; left: 476px;" src="./imgs/1 living room/interactive/recordbox.png">
            <img class="i small" id="couch" style="top: 252px; left: 899px;" src="./imgs/1 living room/interactive/couch.png">
            <img class="i small" id="lamp" style="top: 112px; left: 1701px;" src="./imgs/1 living room/interactive/lamp.png">

            <!-- characters -->
            <img class="c small" id="jake" style="top: 23px; left: 1211px;" src="./imgs/1 living room/characters/jake.png">
            <img class="c small" id="ellie" style="top: 89px; left: 668px;" src="./imgs/1 living room/characters/ellie.png">
            <img class="c small" id="angela" style="top: 165px; left: 935px;" src="./imgs/1 living room/characters/angela.png">
            <img class="c small" id="brad" style="top: 169px; left: 1322px;" src="./imgs/1 living room/characters/brad.png">

            <!-- ui -->
            <img class="u small hidden" id="umap" style="top: 787px; left: 30px;" src="./imgs/1 living room/ui/0 map.png">
            <img class="u small" id="umap2" style="top: 787px; left: 30px;" src="./imgs/1 living room/ui/0 map2.png">
            <img class="u small" id="uphone" style="top: 832px; left: 391px;" src="./imgs/1 living room/ui/1 phone.png">
            <img class="u small hidden" id="uyearbook" style="top: 830px; left: 571px;" src="./imgs/1 living room/ui/2 yearbook.png">
            <img class="u small hidden" id="ubracelet" style="top: 820px; left: 844px;" src="./imgs/1 living room/ui/3 bracelet.png">
            <img class="u small hidden" id="uscrunchie" style="top: 834px; left: 1061px;" src="./imgs/1 living room/ui/4 scrunchie.png">
            <img class="u small hidden" id="ulighter" style="top: 824px; left: 1297px;" src="./imgs/1 living room/ui/5 lighter.png">
            <img class="u small hidden" id="utrash" style="top: 814px; left: 1439px;" src="./imgs/1 living room/ui/6 trash.png">
            <img class="u small" id="usuzy" style="top: 766px; left: 1678px; padding-bottom: 0;" src="./imgs/1 living room/ui/7 suzy.png">
            <img class="u small hidden" id="unosuzy" style="top: 766px; left: 1678px; padding-bottom: 0;" src="./imgs/1 living room/ui/8 nosuzy.png"> 

            <!-- dialog stuff -->
            <img class="d big hidden" id="dark" src="./imgs/1 living room/dialog/dark.png" style="opacity: 50%">
            <img class="d big hidden" id="dmap" src="./imgs/1 living room/dialog/dmap.png">
            <img class="d big hidden" id="dsuzy" src="./imgs/1 living room/dialog/suzy.png">
            <img class="d big hidden" id="dellie" src="./imgs/1 living room/dialog/ellie.png">
            <img class="d big hidden" id="dangela" src="./imgs/1 living room/dialog/angela.png">
            <img class="d big hidden" id="djake" src="./imgs/1 living room/dialog/jake.png">
            <img class="d big hidden" id="dbrad" src="./imgs/1 living room/dialog/brad.png">
            <img class="d big hidden" id="textbox" src="./imgs/1 living room/dialog/textbox.png">
            <div class="d hidden" id="text">
                <b class="d" id="charname" style="color: var(--c)">name: </b>
                <span class="d" id="dialog">placeholder text</span>
            </div>

            <!-- map -->
            <div class="d big hidden" id="rooms">
                <!-- <div class="area" title="livingroom" style="width: 295px; height: 370px; top: 65px; left: 575px;" onclick="location.href = './livingroom.html'"></div> -->
                <div class="area" title="diningroom" style="width: 275px; height: 370px; top: 65px; left: 875px;" onclick="location.href = './diningroom.html'"></div>
                <div class="area" title="kitchen" style="width: 198px; height: 300px; top: 165px; left: 1155px;" onclick="location.href = './kitchen.html'"></div>
                <div class="area" title="backyard" style="width: 198px; height: 95px; top: 65px; left: 1155px;" onclick="location.href = './backyard.html'"></div>
                <div class="area" title="recroom" style="width: 315px; height: 285px; top: 445px; left: 570px;" onclick="location.href = './recroom.html'"></div>
                <div class="area" title="office" style="width: 185px; height: 155px; top: 475px; left: 1170px;" onclick="location.href = './office.html'"></div>
                <div class="area" title="bathroom" style="width: 100px; height: 155px; top: 475px; left: 1065px;" onclick="location.href = './bathroom.html'"></div>
            </div>

            <!-- choices -->
            <img class="d big hidden" id="dark2" src="./imgs/1 living room/dialog/dark.png" style="opacity: 50%">
            <div class="d choicebox hidden" id="choicebox">
                <em class="d choicehelper hidden" id="choicehelper">(click one of the dialog options to continue.)</em>
                <button class="choice hidden" id="choice0">choice0</button>
                <button class="choice hidden" id="choice1">choice1</button>
                <button class="choice hidden" id="choice2">choice2</button>
            </div>

            <!-- yearbook -->
            <img class="d big hidden" id="dark3" src="./imgs/1 living room/dialog/dark.png" style="opacity: 50%">
            <img class="y big hidden" id="page" src="./imgs/1 living room/yearbook/page.png">
            <img class="y big hidden" id="yellie" src="./imgs/1 living room/yearbook/ellie.png">
            <img class="y big hidden" id="yangela" src="./imgs/1 living room/yearbook/angela.png">
            <img class="y big hidden" id="ybrad" src="./imgs/1 living room/yearbook/brad.png">
            <img class="y big hidden" id="yjake" src="./imgs/1 living room/yearbook/jake.png">
            <img class="y big hidden" id="ylaurenp" src="./imgs/1 living room/yearbook/laurenp.png">
            <img class="y big hidden" id="yanvi" src="./imgs/1 living room/yearbook/anvi.png">
            <img class="y big hidden" id="yemily" src="./imgs/1 living room/yearbook/emily.png">
            <img class="y big hidden" id="yryan" src="./imgs/1 living room/yearbook/ryan.png">
            <img class="y big hidden" id="ylisa" src="./imgs/1 living room/yearbook/lisa.png">
            <img class="y big hidden" id="ynick" src="./imgs/1 living room/yearbook/nick.png">
            <img class="y big hidden" id="ycorey" src="./imgs/1 living room/yearbook/corey.png">
            <img class="y big hidden" id="yrohan" src="./imgs/1 living room/yearbook/rohan.png">
            <img class="y big hidden" id="yyasmeen" src="./imgs/1 living room/yearbook/yasmeen.png">
            <img class="y big hidden" id="ylaurenf" src="./imgs/1 living room/yearbook/laurenf.png">
            <img class="y big hidden" id="ykatrina" src="./imgs/1 living room/yearbook/katrina.png">

            <!-- navbar -->
            <div class="nav">
                <a onclick="home()">main menu</a>
                <a onclick="reset()">reset game</a>
            </div>
        </div>
    </body>
    <script
        src="https://code.jquery.com/jquery-3.3.1.js"
        integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
        crossorigin="anonymous">
    </script>
    <script src="./dialog/livingroom.js"></script>
    <script src="./dialog/ui.js"></script>
    <script src="./default.js"></script>
    <script>
        /*** VARIABLES ***/
        // (see default.js for others)
        // dialog character sprites
        let dmap = document.getElementById("dmap");
        let rooms = document.getElementById("rooms");
        let dsuzy = document.getElementById("dsuzy");
        let dellie = document.getElementById("dellie");
        let dangela = document.getElementById("dangela");
        let djake = document.getElementById("djake");
        let dbrad = document.getElementById("dbrad");

        /*** SETUP ***/
        // (see default.js for others)
        // change current room
        localStorage.setItem("curr", "livingroom")
        // do living room opening if not done yet
        if (localStorage.getItem("livopening") == 0) livOpening();
        // if branched, display real map
        if (localStorage.getItem("branch1") != "") {
            console.log("real map GET");
            hide(document.getElementById("umap2"));
            unhide(document.getElementById("umap"));
        }
        

        /*** CLICKING ***/
        $(document).click(function(event) {
            let id = $(event.target).attr('id');                 // id of clicked thing
            let cl = $(event.target).attr('class').split(/\s+/); // classlist (array)
            let val = $(event.target).attr('title');             // title/value

            // if currently on a dialog spiel
            if (cl.includes("d")) {
                if (!isHidden(dark2)) return; // if making a choice, must click one to move on
                if (!isHidden(dmap)) {
                    toggleDialog();
                    hide(dmap);
                    hide(rooms);
                    currentDialog = ["", 0];
                    return;
                }
                dialogSwitch();
                return;
            }
            // if currently making a choice
            if (cl.includes("choice")) {
                currentDialog[1] += parseInt(val);
                dialogSwitch();
                return;
            }
            // if a character
            if (cl.includes("c")) {
                switch(id) {
                    case("ellie"):
                        toggleDialog();
                        localStorage.getItem("branch1") == "" ? ellie1(0) : ellie2(0);
                        break;
                    case("angela"):
                        toggleDialog();
                        localStorage.getItem("branch1") == "" ? angela1(0) : angela2(0);
                        break;
                    case("brad"):
                        toggleDialog();
                        localStorage.getItem("branch1") == "" ? brad1(0) : brad2(0);
                        break;
                    case("jake"):
                        toggleDialog();
                        localStorage.getItem("branch1") == "" ? jake1(0) : jake2(0);
                        break;
                    default:
                        break;
                }
            }
            // if an interactive item
            if (cl.includes("i")) {
                switch(id) {
                    case("tv"):
                        toggleDialog();
                        tv(0);
                        break;
                    case("ps5"):
                        toggleDialog();
                        ps5(0);
                        break;
                    case("recordplayer"):
                        toggleDialog();
                        recordplayer(0);
                        break;
                    case("recordbox"):
                        toggleDialog();
                        recordbox(0);
                        break;
                    case("couch"):
                        toggleDialog();
                        couch(0);
                        break;
                    case("lamp"):
                        toggleDialog();
                        lamp(0);
                        break;
                    default:
                        break;
                }
            }
            // if a ui item
            if (cl.includes("u")) {
                switch(id) {
                    case("umap"):
                        toggleDialog();
                        map(0);
                        break;
                    case("umap2"):
                        toggleDialog();
                        map2(0);
                        break;
                    case("uphone"):
                        toggleDialog();
                        phone(0);
                        break;
                    case("uyearbook"):
                        toggleDialog();
                        yearbook(0);
                        break;
                    case("ubracelet"):
                        toggleDialog();
                        bracelet(0);
                        break;
                    case("uscrunchie"):
                        toggleDialog();
                        scrunchie(0);
                        break;
                    case("ulighter"):
                        toggleDialog();
                        lighter(0);
                        break;
                    case("utrash"):
                        toggleDialog();
                        trash(0);
                        break;
                    case("usuzy"):
                        toggleDialog();
                        suzy1(0);
                        break;
                    case("unosuzy"):
                        toggleDialog();
                        nosuzy2(0);
                        break;
                    default:
                        break;
                }
            }
            // if yearbook
            if (cl.includes("y")) {
                toggleYearbook();
                currentDialog = ["", 0];
                return;
            }
        });

        /*** GENERAL FUNCTIONS ***/
        // (see default.js for others))
        // dialog switch
        function dialogSwitch() {
            switch (currentDialog[0]) {
                    case ("auto"): // automatic dialog
                        auto(currentDialog[1]);
                        break;
                    case ("ellie1"): // character
                        ellie1(currentDialog[1]);
                        break;
                    case ("ellie2"):
                        ellie2(currentDialog[1]);
                        break;
                    case ("angela1"):
                        angela1(currentDialog[1]);
                        break;
                    case ("angela2"):
                        angela2(currentDialog[1]);
                        break;
                    case ("brad1"):
                        brad1(currentDialog[1]);
                        break;
                    case ("brad2"):
                        brad2(currentDialog[1]);
                        break;
                    case ("jake1"):
                        jake1(currentDialog[1]);
                        break;
                    case ("jake2"):
                        jake2(currentDialog[1]);
                        break;
                    case ("tv"): // interactive
                        tv(currentDialog[1]);
                        break;
                    case ("ps5"):
                        ps5(currentDialog[1]);
                        break;
                    case ("recordplayer"):
                        recordplayer(currentDialog[1]);
                        break;
                    case ("recordbox"):
                        recordbox(currentDialog[1]);
                        break;
                    case ("couch"):
                        couch(currentDialog[1]);
                        break;
                    case ("lamp"):
                        lamp(currentDialog[1]);
                        break;
                    case ("map"): // ui
                        map(currentDialog[1]);
                        break;
                    case ("map2"): // ui
                        map2(currentDialog[1]);
                        break;
                    case ("phone"):
                        phone(currentDialog[1]);
                        break;
                    case ("yearbook"):
                        yearbook(currentDialog[1]);
                        break;
                    case ("bracelet"):
                        bracelet(currentDialog[1]);
                        break;
                    case ("scrunchie"):
                        scrunchie(currentDialog[1]);
                        break;
                    case ("lighter"):
                        lighter(currentDialog[1]);
                        break;
                    case ("trash"):
                        trash(currentDialog[1]);
                        break;
                    case ("suzy"):
                        suzy1(currentDialog[1]);
                        break;
                    case ("nosuzy2"):
                        nosuzy2(currentDialog[1]);
                        break;
                    default:
                        break;
                }
        }

        /*** GAMEPLAY FUNCTIONS ***/
        // (see default.js for others)
        // opening sequence
        function livOpening() {
            console.log("starting scene...");
            toggleDialog();
            auto(0);
        }
        // automatic dialog
        function auto(n) {
            console.log("auto dialog:", n);
            if (n == 0) currentDialog[0] = "auto"; // dialog start
            if (n == autoa.length) { // dialog finish
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dbrad);
                toggleDialog();
                currentDialog = ["", 0];
                localStorage.setItem("livopening", 1);
                return;
            }
            autoa[n] == "ELLIE:" ? unhide(dellie) : hide(dellie); // show ellie's sprite when she's talking
            autoa[n] == "ANGELA:" ? unhide(dangela) : hide(dangela); // angela
            autoa[n] == "BRAD:" ? unhide(dbrad) : hide(dbrad); // brad
            autoa[n] == "JAKE:" ? unhide(djake) : hide(djake); // jake
            autoa[n] == "SUZY:" ? unhide(dsuzy) : hide(dsuzy); // suzy
            if (autob[n].substring(0,6) == "CHOICE") { // choice
                charname.innerHTML = "";
                dialog.innerHTML = "";
                getChoices(autob[n]);
                currentDialog[1]++;
            }
            else { // mid-dialog
                if (!isHidden(dark2)) toggleChoices();
                if (autob[n].includes("^")) {
                    let dgs = autob[n].split("^");
                    charname.innerHTML = autoa[n];
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    charname.innerHTML = autoa[n];
                    dialog.innerHTML = autob[n];
                    currentDialog[1]++;
                }
            }
        }
        // character dialog
        function ellie1(n) {
            console.log("ellie1 dialog:", n);
            if (n == 0) currentDialog[0] = "ellie1"; // dialog start
            if (n == ellie1a.length) { // dialog finish
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dellie);
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            ellie1a[n] == "ELLIE:" ? unhide(dellie) : hide(dellie); // show ellie's sprite when she's talking
            if (ellie1b[n].substring(0,6) == "CHOICE") { // choice
                charname.innerHTML = "";
                dialog.innerHTML = "";
                getChoices(ellie1b[n], "ellie");
                currentDialog[1]++;
            }
            else if (ellie1b[n].substring(0,6) == "BRANCH") { // branch
                unhide(document.getElementById("ubracelet")); // unhide bracelet
                localStorage.setItem("branch1", "anvi") // ANVI ROUTE
                hide(document.getElementById("umap2"));
                unhide(document.getElementById("umap"));

                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dellie);
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else if (ellie1b[n].substring(0,4) == "SIGN") { // sign
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dellie);
                localStorage.setItem("sigs", localStorage.getItem("sigs") + "_ellie") // add ellie's signature
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else { // mid-dialog
                if (!isHidden(dark2)) toggleChoices();
                if (ellie1b[n].includes("^")) {
                    let dgs = ellie1b[n].split("^");
                    charname.innerHTML = ellie1a[n];
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    charname.innerHTML = ellie1a[n];
                    dialog.innerHTML = ellie1b[n];
                    currentDialog[1]++;
                }
            }
        }
        function angela1(n) {
            console.log("angela1 dialog:", n);
            if (n == 0) currentDialog[0] = "angela1"; // dialog start
            if (n == angela1a.length) { // dialog finish
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dangela);
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            angela1a[n] == "ANGELA:" ? unhide(dangela) : hide(dangela); // show angela's sprite when she's talking
            if (angela1b[n].substring(0,6) == "CHOICE") { // choice
                charname.innerHTML = "";
                dialog.innerHTML = "";
                getChoices(angela1b[n], "angela");
                currentDialog[1]++;
            }
            else if (angela1b[n].substring(0,6) == "BRANCH") { // branch
                unhide(document.getElementById("uscrunchie")); // unhide scrunchie
                localStorage.setItem("branch1", "ryan") // RYAN ROUTE
                hide(document.getElementById("umap2"));
                unhide(document.getElementById("umap"));
                
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dangela);
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else if (angela1b[n].substring(0,4) == "SIGN") { // sign
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dangela);
                localStorage.setItem("sigs", localStorage.getItem("sigs") + "_angela") // add angela's signature
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else { // mid-dialog
                if (!isHidden(dark2)) toggleChoices();
                if (angela1b[n].includes("^")) {
                    let dgs = angela1b[n].split("^");
                    charname.innerHTML = angela1a[n];
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    charname.innerHTML = angela1a[n];
                    dialog.innerHTML = angela1b[n];
                    currentDialog[1]++;
                }
            }
        }
        function brad1(n) {
            console.log("brad1 dialog:", n);
            if (n == 0) currentDialog[0] = "brad1"; // dialog start
            if (n == brad1a.length) { // dialog finish
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dbrad);
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            brad1a[n] == "BRAD:" ? unhide(dbrad) : hide(dbrad); // show brad's sprite when he's talking
            if (brad1b[n].substring(0,6) == "CHOICE") { // choice
                charname.innerHTML = "";
                dialog.innerHTML = "";
                getChoices(brad1b[n], "brad");
                currentDialog[1]++;
            }
            else if (brad1b[n].substring(0,6) == "BRANCH") { // branch
                unhide(document.getElementById("ulighter")); // unhide lighter
                localStorage.setItem("branch1", "lisa") // LISA ROUTE
                hide(document.getElementById("umap2"));
                unhide(document.getElementById("umap"));

                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dbrad);
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else if (brad1b[n].substring(0,4) == "SIGN") { // sign
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dbrad);
                localStorage.setItem("sigs", localStorage.getItem("sigs") + "_brad") // add brad's signature
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else { // mid-dialog
                if (!isHidden(dark2)) toggleChoices();
                if (brad1b[n].includes("^")) {
                    let dgs = brad1b[n].split("^");
                    charname.innerHTML = brad1a[n];
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    charname.innerHTML = brad1a[n];
                    dialog.innerHTML = brad1b[n];
                    currentDialog[1]++;
                }
            }
        }
        function jake1(n) {
            console.log("jake1 dialog:", n);
            if (n == 0) currentDialog[0] = "jake1"; // dialog start
            if (n == jake1a.length) { // dialog finish
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(djake);
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            jake1a[n] == "JAKE:" ? unhide(djake) : hide(djake); // show jake's sprite when he's talking
            jake1a[n] == "SUZY:" ? unhide(dsuzy) : hide(dsuzy); // suzy
            if (jake1b[n].substring(0,6) == "CHOICE") { // choice
                charname.innerHTML = "";
                dialog.innerHTML = "";
                getChoices(jake1b[n], "jake");
                currentDialog[1]++;
            }
            else if (jake1b[n].substring(0,6) == "BRANCH") { // branch
                localStorage.setItem("branch1", "suzy") // SUZY ROUTE
                hide(document.getElementById("umap2"));
                unhide(document.getElementById("umap"));

                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(djake);
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else if (jake1b[n].substring(0,4) == "SIGN") { // sign
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(djake);
                localStorage.setItem("sigs", localStorage.getItem("sigs") + "_jake") // add jake's signature
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else { // mid-dialog
                if (!isHidden(dark2)) toggleChoices();
                if (jake1b[n].includes("^")) {
                    let dgs = jake1b[n].split("^");
                    charname.innerHTML = jake1a[n];
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    charname.innerHTML = jake1a[n];
                    dialog.innerHTML = jake1b[n];
                    currentDialog[1]++;
                }
            }
        }
        function ellie2(n) {
            console.log("ellie2 dialog:", n);
            if (n == 0) currentDialog[0] = "ellie2"; // dialog start
            if (n == ellie2a.length) { // dialog finish
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dellie);
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            ellie2a[n] == "ELLIE:" ? unhide(dellie) : hide(dellie); // show ellie's sprite when she's talking
            if (ellie2b[n].substring(0,6) == "CHOICE") { // choice
                charname.innerHTML = "";
                dialog.innerHTML = "";
                getChoices(ellie2b[n], "ellie");
                currentDialog[1]++;
            }
            else if (ellie2b[n].substring(0,4) == "SIGN") { // sign
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dellie);
                localStorage.setItem("sigs", localStorage.getItem("sigs") + "_ellie") // add ellie's signature
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else { // mid-dialog
                if (!isHidden(dark2)) toggleChoices();
                if (ellie2b[n].includes("^")) {
                    let dgs = ellie2b[n].split("^");
                    charname.innerHTML = ellie2a[n];
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    charname.innerHTML = ellie2a[n];
                    dialog.innerHTML = ellie2b[n];
                    currentDialog[1]++;
                }
            }
        }
        function angela2(n) {
            console.log("angela2 dialog:", n);
            if (n == 0) currentDialog[0] = "angela2"; // dialog start
            if (n == angela2a.length) { // dialog finish
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dangela);
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            angela2a[n] == "ANGELA:" ? unhide(dangela) : hide(dangela); // show angela's sprite when she's talking
            if (angela2b[n].substring(0,6) == "CHOICE") { // choice
                charname.innerHTML = "";
                dialog.innerHTML = "";
                getChoices(angela2b[n], "angela");
                currentDialog[1]++;
            }
            else if (angela2b[n].substring(0,4) == "SIGN") { // sign
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dangela);
                localStorage.setItem("sigs", localStorage.getItem("sigs") + "_angela") // add angela's signature
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else { // mid-dialog
                if (!isHidden(dark2)) toggleChoices();
                if (angela2b[n].includes("^")) {
                    let dgs = angela2b[n].split("^");
                    charname.innerHTML = angela2a[n];
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    charname.innerHTML = angela2a[n];
                    dialog.innerHTML = angela2b[n];
                    currentDialog[1]++;
                }
            }
        }
        function brad2(n) {
            console.log("brad2 dialog:", n);
            if (n == 0) currentDialog[0] = "brad2"; // dialog start
            if (n == brad2a.length) { // dialog finish
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dbrad);
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            brad2a[n] == "BRAD:" ? unhide(dbrad) : hide(dbrad); // show brad's sprite when he's talking
            brad2a[n] == "ELLIE:" ? unhide(dellie) : hide(dellie); // ellie
            if (brad2b[n].substring(0,6) == "CHOICE") { // choice
                charname.innerHTML = "";
                dialog.innerHTML = "";
                getChoices(brad2b[n], "brad");
                currentDialog[1]++;
            }
            else if (brad2b[n].substring(0,4) == "SIGN") { // sign
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(dbrad);
                localStorage.setItem("sigs", localStorage.getItem("sigs") + "_brad") // add brad's signature
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else { // mid-dialog
                if (!isHidden(dark2)) toggleChoices();
                if (brad2b[n].includes("^")) {
                    let dgs = brad2b[n].split("^");
                    charname.innerHTML = brad2a[n];
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    charname.innerHTML = brad2a[n];
                    dialog.innerHTML = brad2b[n];
                    currentDialog[1]++;
                }
            }
        }
        function jake2(n) {
            console.log("jake2 dialog:", n);
            if (n == 0) currentDialog[0] = "jake2"; // dialog start
            if (n == jake2a.length) { // dialog finish
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(djake);
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            jake2a[n] == "JAKE:" ? unhide(djake) : hide(djake); // show jake's sprite when he's talking
            jake2a[n] == "SUZY:" ? unhide(dsuzy) : hide(dsuzy); // suzy
            if (jake2b[n].substring(0,6) == "CHOICE") { // choice
                charname.innerHTML = "";
                dialog.innerHTML = "";
                getChoices(jake2b[n], "jake");
                currentDialog[1]++;
            }
            else if (jake2b[n].substring(0,6) == "BRANCH") { // branch
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(djake);
                localStorage.setItem("branch1", "suzy") // SUZY ROUTE
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else if (jake2b[n].substring(0,4) == "SIGN") { // sign
                if (!isHidden(dark2)) toggleChoices();
                hide(choicehelper);
                hide(djake);
                localStorage.setItem("sigs", localStorage.getItem("sigs") + "_jake") // add jake's signature
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else { // mid-dialog
                if (!isHidden(dark2)) toggleChoices();
                if (jake2b[n].includes("^")) {
                    let dgs = jake2b[n].split("^");
                    charname.innerHTML = jake2a[n];
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    charname.innerHTML = jake2a[n];
                    dialog.innerHTML = jake2b[n];
                    currentDialog[1]++;
                }
            }
        }
        // interactive item dialog
        function tv(n) {
            console.log("tv dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "tv";
            if (n == tv1a.length) {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            if (tv1a[n].substring(0,6) == "CHOICE") {
                dialog.innerHTML = "";
                getChoices(tv1a[n]);
                currentDialog[1]++;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (tv1a[n].includes("^")) {
                    let dgs = tv1a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = tv1a[n];
                    currentDialog[1]++;
                }
            }
        }
        function ps5(n) {
            console.log("ps5 dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "ps5";
            if (n == ps51a.length) {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            if (ps51a[n].substring(0,6) == "CHOICE") {
                dialog.innerHTML = "";
                getChoices(ps51a[n]);
                currentDialog[1]++;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (ps51a[n].includes("^")) {
                    let dgs = ps51a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = ps51a[n];
                    currentDialog[1]++;
                }
            }
        }
        function recordplayer(n) {
            console.log("recordplayer dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "recordplayer";
            if (n == recordplayer1a.length) {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            if (recordplayer1a[n].substring(0,6) == "CHOICE") {
                dialog.innerHTML = "";
                getChoices(recordplayer1a[n]);
                currentDialog[1]++;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (recordplayer1a[n].includes("^")) {
                    let dgs = recordplayer1a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = recordplayer1a[n];
                    currentDialog[1]++;
                }
            }
        }
        function recordbox(n) {
            console.log("recordbox dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "recordbox";
            if (n == recordbox1a.length) {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            if (recordbox1a[n].substring(0,6) == "CHOICE") {
                dialog.innerHTML = "";
                getChoices(recordbox1a[n]);
                currentDialog[1]++;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (recordbox1a[n].includes("^")) {
                    let dgs = recordbox1a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = recordbox1a[n];
                    currentDialog[1]++;
                }
            }
        }
        function couch(n) {
            console.log("couch dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "couch";
            if (n == couch1a.length) {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            if (couch1a[n].substring(0,6) == "CHOICE") {
                dialog.innerHTML = "";
                getChoices(couch1a[n]);
                currentDialog[1]++;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (couch1a[n].includes("^")) {
                    let dgs = couch1a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = couch1a[n];
                    currentDialog[1]++;
                }
            }
        }
        function lamp(n) {
            console.log("lamp dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "lamp";
            if (n == lamp1a.length) {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            if (lamp1a[n].substring(0,6) == "CHOICE") {
                dialog.innerHTML = "";
                getChoices(lamp1a[n]);
                currentDialog[1]++;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (lamp1a[n].includes("^")) {
                    let dgs = lamp1a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = lamp1a[n];
                    currentDialog[1]++;
                }
            }
        }
        // ui (see default.js)
        function map2(n) {
            console.log("map2 dialog:", n);
            charname.innerHTML = "";
            if (n == 0) currentDialog[0] = "map2";
            if (n == map2a.length) {
                if (!isHidden(dark2)) toggleChoices();
                toggleDialog();
                currentDialog = ["", 0];
                return;
            }
            else {
                if (!isHidden(dark2)) toggleChoices();
                if (map2a[n].includes("^")) {
                    let dgs = map2a[n].split("^");
                    dialog.innerHTML = dgs[0];
                    currentDialog[1] += parseInt(dgs[1]);
                }
                else {
                    dialog.innerHTML = map2a[n];
                    currentDialog[1]++;
                }
            } 
        }
   </script>
</html>